slug: sonos_api
name: Sonos API
description: Proxy API for node-sonos-http-api with custom routes and helpers.
url: https://github.com/rtimmons/smarthome
copy:
  - src
  - package.json
  - package-lock.json
  - tsconfig.json
container_workdir: /opt/sonos-api/app
npm_build: true
homeassistant_min: "2024.6.0"
ingress: false
homeassistant_api: false
auth_api: false
host_network: false
ports:
  "5006": 5006
ports_description:
  "5006": Sonos API HTTP port
environment:
  NODE_OPTIONS: "--enable-source-maps"
options:
  sonos_base_url: "http://local-node-sonos-http-api:5005"
schema:
  sonos_base_url: "str?"
translations:
  configuration:
    sonos_base_url:
      name: Sonos API base URL
      description: Base URL for node-sonos-http-api (e.g., http://node-sonos-http-api:5005).
docs:
  readme: >
    Local add-on that provides a proxy API for node-sonos-http-api with custom routes and helper endpoints
    for controlling Sonos speakers.
  docs: >
    This add-on provides a proxy API for node-sonos-http-api with custom routes and helper endpoints
    tailored for controlling Sonos speakers in your smart home setup.
  access: >
    Access the API at http://<ha-host>:5006/ or use it from other add-ons via http://sonos-api:5006/.
  dependencies:
    - "Requires the Node Sonos HTTP API add-on to be installed and running first."
run_env:
  - env: PORT
    value: "5006"
  - env: APP_PORT
    value: "5006"
  - env: SONOS_BASE_URL
    from_option: sonos_base_url
    default: "http://local-node-sonos-http-api:5005"
tests:
  - npm run build
